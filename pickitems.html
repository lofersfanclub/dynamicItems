<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <!-- Latest compiled and minified CSS -->

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">


    <link rel="stylesheet" type="text/css" href="style.css">
      <link rel="stylesheet" href="  https://cdn.jsdelivr.net/npm/pretty-checkbox@3.0/dist/pretty-checkbox.min.css">
</head>
<body>

  <div class="container text-center">
  <div class="row text-center">
    <div class="col-sm-6 text-right">
        <a href="index.html" class="btn btn-primary">Index</a>
    </div>
    <div class="col-sm-6 text-left">
        <a href="pickitems.html" class="btn btn-primary"> Pick Items</a>
    </div>
</div>

<h1 class="display-1">Pick items</h1>
</div>



<div class="container text-center">
<div class="row text-center">
  <div class="col-sm-4 text-center">
    <div class="card">
      <div class="card-body">
        <!-- <div class="custom-control">
          <input type="checkbox" class="custom-control-input" id="customCheck1" value="5235">
          <label class="custom-control-label" for="customCheck1">5235</label>
        </div> -->
        <div class="pretty p-icon p-round p-jelly">
          <input type="checkbox" id="customCheck1" value="5235" />
          <div class="state p-primary">
              <i class="icon mdi mdi-check"></i>
              <label>5235</label>
          </div>
      </div>
      </div>
    </div>
  </div>



  <div class="col-sm-4 text-center">
    <div class="card">
      <div class="card-body">
        <div class="custom-control custom-checkbox">
          <input type="checkbox" class="custom-control-input" id="customCheck2" value="10395">
          <label class="custom-control-label" for="customCheck2">10395</label>
        </div>
      </div>
    </div>
  </div>



  <div class="col-sm-4 text-center">
    <div class="card">
      <div class="card-body">
        <div class="custom-control custom-checkbox">
          <input type="checkbox" class="custom-control-input" id="customCheck3" value="6973">
          <label class="custom-control-label" for="customCheck3">6973</label>
        </div>
      </div>
    </div>
  </div>



  <div class="col-sm-4 text-center">
    <div class="card">
      <div class="card-body">
        <div class="custom-control custom-checkbox">
          <input type="checkbox" class="custom-control-input" id="customCheck4" value="1528">
          <label class="custom-control-label" for="customCheck4">1528</label>
        </div>
      </div>
    </div>
  </div>


  <div class="col-sm-4 text-center">
    <div class="card">
      <div class="card-body">
        <div class="custom-control custom-checkbox">
          <input type="checkbox" class="custom-control-input" id="customCheck5" value="5222">
          <label class="custom-control-label" for="customCheck5">5222</label>
        </div>
      </div>
    </div>
  </div>
</div>



<div class="row">
<div class="col-sm-6 text-center">
  <button id="update-btn" type="button" class="btn btn-primary">Update cookie</button>
</div>
<div class="col-sm-6 text-center">
  <button id="clear-btn" type="button" class="btn btn-secondary">Clear cookie</button>
</div>
</div>
</div>
<script src="cookies.js"></script>
</body>

<script>



var updateBtn = document.getElementById('update-btn');
var clearBtn = document.getElementById('clear-btn');

var customCheck1 = document.getElementById('customCheck1');
var customCheck2 = document.getElementById('customCheck2');
var customCheck3 = document.getElementById('customCheck3');
var customCheck4 = document.getElementById('customCheck4');
var customCheck5 = document.getElementById('customCheck5');

var checkBoxArray = [customCheck1, customCheck2, customCheck3, customCheck4, customCheck5];
var favoritItems = [];

updateBtn.addEventListener('click', update);
clearBtn.addEventListener('click', clear);

function update(){
  console.log("update click");
  favoritItems = [];
  for (i = 0; i < checkBoxArray.length; i++) {
    if(checkBoxArray[i].checked){
        favoritItems.push(checkBoxArray[i].value);
    }
    console.log(i);
    if(i === 4){
      setCookie("retargetItems", favoritItems, 30);
      console.log("set cookie");
    }
  }
}

function clear(){
  console.log("clear");
  var emptyArr = [];
  setCookie("retargetItems", emptyArr, 30);
}



checkCookie(giveMeTheCookies)

function giveMeTheCookies(cookieItems){
for (var x in cookieItems) {
  for (var y in checkBoxArray)
    if(checkBoxArray[y].value == cookieItems[x]){
      console.log("In cookie: " + checkBoxArray[y].value + "should bee checked: " + checkBoxArray[y].checked);
      checkBoxArray[y].checked = true;
    }
    else{
      console.log("not in cookie: " + checkBoxArray[y].value);
    }
  }

}

</script>
</html>
